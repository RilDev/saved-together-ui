{"version":3,"sources":["webpack:///./src/pages/post/index.js"],"names":["PostPageWrapper","styled","div","PostPage","props","slug","useParams","useState","post","setPost","getPost","a","fetch","process","response","ok","json","result","formatted","title","rendered","content","image","media_details","sizes","source_url","useEffect","className","src","alt","dangerouslySetInnerHTML","__html"],"mappings":"2aAMA,IAAMA,E,UAAkBC,EAAOC,IAAV,KAiENC,UApDE,SAAAC,GACf,IAAMC,EAAOC,sBADW,EAEAC,qBAAjBC,EAFiB,KAEXC,EAFW,KAIlBC,EAAO,uCAAG,WAAML,GAAN,mBAAAM,EAAA,+EAGWC,MAClBC,4EAAyCR,EADlB,WAHhB,YAGNS,EAHM,QAOCC,GAPD,iCAQWD,EAASE,OARpB,OAQJC,EARI,OAUJC,EAAY,CAChBC,MAAOF,EAAO,GAAGE,MAAMC,SACvBC,QAASJ,EAAO,GAAGI,QAAQD,SAC3BE,MACEL,EAAO,GAAP,UAAuB,oBAAoB,GAAGM,cAAcC,MACzD,aAAaC,YAEpBhB,EAAQS,GAjBE,+HAAH,sDA6Bb,OALAQ,qBAAU,WACRhB,EAAQL,KAEP,IAGD,kBAACL,EAAD,KACE,kBAAC,IAAD,KACGQ,GACC,oCACE,4BAAKA,EAAKW,OACV,yBAAKQ,UAAS,oBACZ,yBAAKC,IAAKpB,EAAKc,MAAOO,IAAG,MAE3B,yBAAKC,wBAAyB,CAAEC,OAAQvB,EAAKa","file":"component---src-pages-post-index-js-0cd5e2b8f737fcf11a37.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from '@reach/router';\nimport Layout from '../../components/layout/layout';\n// import PropTypes from \"prop-types\";\nimport styled from 'styled-components';\n\nconst PostPageWrapper = styled.div`\n  .image {\n    overflow: hidden;\n    max-height: 30rem;\n\n    img {\n      width: 100%;\n      height: 100%;\n      object-fit: cover;\n    }\n  }\n`;\n\nconst PostPage = props => {\n  const slug = useParams();\n  const [post, setPost] = useState();\n\n  const getPost = async slug => {\n    try {\n      //get latest WordPress Posts\n      const response = await fetch(\n        `${process.env.GATSBY_API_URL}/posts?slug=${slug}&_embed`,\n      );\n\n      if (response.ok) {\n        const result = await response.json();\n\n        const formatted = {\n          title: result[0].title.rendered,\n          content: result[0].content.rendered,\n          image:\n            result[0]['_embedded']['wp:featuredmedia'][0].media_details.sizes\n              [\"1536x1536\"].source_url,\n        };\n        setPost(formatted);\n      }\n    } catch (error) {\n      throw error;\n    }\n  };\n\n  useEffect(() => {\n    getPost(slug);\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <PostPageWrapper>\n      <Layout>\n        {post && (\n          <>\n            <h2>{post.title}</h2>\n            <div className={`image full-width`}>\n              <img src={post.image} alt={``} />\n            </div>\n            <div dangerouslySetInnerHTML={{ __html: post.content }} />\n          </>\n        )}\n      </Layout>\n    </PostPageWrapper>\n  );\n};\n\n// PostPage.propTypes = {};\n\nexport default PostPage;\n"],"sourceRoot":""}